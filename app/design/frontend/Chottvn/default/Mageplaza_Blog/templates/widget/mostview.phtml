<?php
/**
 * Mageplaza
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Mageplaza.com license that is
 * available through the world-wide-web at this URL:
 * https://www.mageplaza.com/LICENSE.txt
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade this extension to newer
 * version in the future.
 *
 * @category    Mageplaza
 * @package     Mageplaza_Blog
 * @copyright   Copyright (c) 2018 Mageplaza (http://www.mageplaza.com/)
 * @license     https://www.mageplaza.com/LICENSE.txt
 */

/** @var \Mageplaza\Blog\Block\Sidebar\MostView $block */
?>
<?php
    $postsRecent = $block->getRecentPost();
    $url_main    = $block->getUrl();
    $first_ob_post = $postsRecent->getFirstItem();
    $first_ob_post_id = $postsRecent->getFirstItem()->getId();
?>

<div class="mp-sidebar product info detailed">
    <!-- Moi Nhat -->
    <?php if ($postsRecent->getSize()>0): ?>
        <div class="product data items">
            <div class="block-mp-sidebar-heading">
                <span class="title"><?php echo $this->getData('title'); ?></span>
            </div>
            <?php if ($postsRecent->getSize()>0): ?>
                <div class="side-content-wrapper row">
                    <div class="col-md-12 col-sm-6">
                        <div class="row">
                            <div class="main-item col-md-12">
                                <div class="card bg-white text-dark card-text-bottom post-thumb sidebar-bottom-box">
                                        <a href="<?php echo $first_ob_post->getUrl() ?>" class="thumb-zoom" title="<?php echo $first_ob_post->getName() ?>">
                                            <img title="<?php echo $first_ob_post->getName() ?>" src="<?php echo $block->resizeImage($first_ob_post->getImage()); ?>" alt="<?php echo $first_ob_post->getName() ?>" class="card-img img-fluid border-big-image">
                                            <?php if($first_ob_post->getIsVideo()== 1): ?>
                                                 <img src="<?php echo $block->getViewFileUrl('images/play-icon.png'); ?>" class="img-overlay-big" style="width: 69.6px;">
                                             <?php endif;?>
                                        </a>
                                        <div class="card-img-overlay">
                                            <h5 class="card-title card-title-sidebar">
                                                <a class="block-with-text-title" href="<?php echo $first_ob_post->getUrl() ?>" title="<?php echo $first_ob_post->getName() ?>">
                                                    <?php echo $first_ob_post->getName() ?>
                                                </a>
                                            </h5>
                                        </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12 col-sm-6">
                    <!-- BEGIN: News item -->
                        <?php foreach ($postsRecent as $key => $post): ?>
                            <?php if ($post->getId() != $first_ob_post_id): ?>
                                <div class="row">
                                    <div class="card-horizontal">
                                        <div class="c-display-flex">
                                            <div class="col-5 flex-left">
                                                <div class="post-thumb">
                                                    <a href="<?php echo $post->getUrl() ?>" class="thumb-zoom" title="<?php echo $post->getName() ?>">
                                                        <img class="card-img-top border-small-image" src="<?php echo $block->resizeImage($post->getImage());  ?>" title="<?php echo $post->getName() ?>" alt="<?php echo $post->getName() ?>">
                                                        <?php if($post->getIsVideo()== 1): ?>
                                                            <img src="<?php echo $block->getViewFileUrl('images/play-icon.png'); ?>" class="img-overlay-small" style="width: 30.6px;">
                                                        <?php endif;?>
                                                    </a>
                                                </div>
                                            </div>
                                            <div class="col-7 flex-right">
                                                <div class="card-body">
                                                    <h5 class="card-title">
                                                        <a class="c-post-title-small block-with-text-title" href="<?php echo $post->getUrl() ?>" title="<?php echo $post->getName() ?>">
                                                            <?php echo $post->getName() ?>
                                                        </a>
                                                    </h5>
                                                    <h6 class="card-subtitle text-muted">
                                                        <?php echo $post->getPublishDate() ? $block->getDateFormat($post->getPublishDate()) : ''; ?>
                                                    </h6>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            <?php endif; ?>
                        <?php endforeach; ?>
                    <!-- END: News item -->
                    </div>
                </div>
            <?php else: ?>
                <div class="mostview-nopost"><?php echo __('No Posts'); ?></div>
            <?php endif; ?>
        </div>
    <?php endif; ?>
</div>
