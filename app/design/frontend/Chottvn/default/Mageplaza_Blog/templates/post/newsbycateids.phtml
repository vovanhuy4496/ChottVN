<?php
/**
 * Mageplaza
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Mageplaza.com license that is
 * available through the world-wide-web at this URL:
 * https://www.mageplaza.com/LICENSE.txt
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade this extension to newer
 * version in the future.
 *
 * @category    Mageplaza
 * @package     Mageplaza_Blog
 * @copyright   Copyright (c) 2018 Mageplaza (http://www.mageplaza.com/)
 * @license     https://www.mageplaza.com/LICENSE.txt
 */

/** @var \Mageplaza\Blog\Block\Frontend $block */
?>

<?php
    // Get arguments from block
    $cate_ids = $block->getData("category_ids");
    $limit = $block->getData("limit");
    $viewAllUrl = $this->getData('view_all_url') ?? "";
    $cssClass = $this->getData('css_class');
    $title = $block->getData("title");
    $video_cat = $block->getData("category_video") ? $block->getData("category_video"): 0;
    $cates = explode(',', $cate_ids);
    // Get News
    $postsRecent = $block->getNewsByCateIds($cate_ids, $limit);
    $url_main = $block->getUrl();
?>

<div class="sm-listing-tabs slidertype <?php echo $cssClass; ?> ">
    <div class="ltabs-head">
        <div class="title-home-page"><span><?php echo $title; ?></span></div>
    </div>
    <div class="ltabs-wrap">
      <div class="row homepage-news">
        <?php foreach ($postsRecent as $post): ?>
            <?php
                // echo $post->getUrl()."<br>";
                // echo $post->getName()."<br>";
                // //echo $post->getCategoryIds()."<br>";
                // echo $post->getPublishDate() ? $block->getDateFormat($post->getPublishDate()) : ''."<br>";
                // echo "---------------------------------------"."<br>";

                // Get Image Resize
                // $url_image = $block->resizeImage($post->getImage());
                // $url_resize = $url_main."timthumb.php?src=".$url_image."&w=358&h=280";
            ?>
            <div class="col-lg-3 col-md-3 col-sm-6 col-6">
                <div class="card card-news card-news-wrapper">
                    <div class="post-thumb post-thumb-title border-big-image">
                        <a href="<?php echo $post->getUrl(); ?>" class="thumb-zoom" title="<?php echo $post->getName(); ?>">
                            <img title="<?php echo $post->getName(); ?>" alt="<?php echo $post->getName(); ?>" class="card-img-top border-big-image" src="<?php echo $block->resizeImage($post->getImage()); ?>">
                            <?php if($post->getIsVideo()== 1): ?>
                                <img src="<?php echo $block->getViewFileUrl('images/play-icon.png'); ?>" class="img-overlay">
                            <?php endif;?>
                        </a>
                    </div>
                    <div class="card-body">
                        <p class="card-title card-title-news hidden-overflow overflow-2">
                            <a href="<?php echo $post->getUrl(); ?>" class="thumb-zoom c-title-no-bg-big" title="<?php echo $post->getName(); ?>">
                                <?php echo $post->getName(); ?>
                            </a>
                        </p>
                        <!-- <h6 class="card-subtitle text-muted"><?php echo $post->getPublishDate() ? $block->getDateFormat($post->getPublishDate()) : ''; ?></h6>
                        <p class="card-text hidden-overflow overflow-3" title="<?php echo $post->getName(); ?>"><?php echo $post->getShortDescription(); ?>
                        </p>
                        <a href="<?php echo $post->getUrl(); ?>" class="card-link float-right">Đọc Thêm</a> -->
                    </div>
                </div>
            </div>
        <?php endforeach; ?>
      </div>
      <?php
          if (! empty($viewAllUrl) ) {
      ?>
          <div class="ltabs-view-all">
              <a href="<?php echo $viewAllUrl; ?>"><span class=""><?php echo __('View all news') ?></span> <i class="fas fa-chevron-right"></i></a>
          </div>
      <?php } ?>
    </div>
</div>
